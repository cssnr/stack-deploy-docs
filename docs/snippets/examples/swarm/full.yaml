- name: "Stack Deploy"
  uses: cssnr/stack-deploy-action@v1
  with:
    name: "stack-name"
    file: "docker-compose.yaml"
    host: ${{ secrets.DOCKER_HOST }}
    user: ${{ secrets.DOCKER_USER }}
    port: 22 # 22 is default, you can remove or change this
    pass: ${{ secrets.DOCKER_PASS }} # not needed with ssh_key
    ssh_key: ${{ secrets.DOCKER_SSH_KEY }} # not needed with pass
    env_file: "stack.env"
    detach: true
    prune: false
    resolve_image: "always"
    registry_auth: true # not needed with registry_pass/registry_user
    registry_host: "ghcr.io"
    registry_user: ${{ vars.GHCR_USER }}
    registry_pass: ${{ secrets.GHCR_PASS }}
    summary: true
