- name: "Stack Deploy"
  uses: cssnr/stack-deploy-action@v1
  with:
    name: "stack-name"
    file: "docker-compose.yaml"
    mode: "compose"
    host: ${{ secrets.DOCKER_HOST }}
    user: ${{ secrets.DOCKER_USER }}
    port: 22 # 22 is default, you can remove or change this
    pass: ${{ secrets.DOCKER_PASS }} # not needed with ssh_key
    ssh_key: ${{ secrets.DOCKER_SSH_KEY }} # not needed with pass
    env_file: "stack.env"
    registry_host: "ghcr.io"
    registry_user: ${{ vars.GHCR_USER }}
    registry_pass: ${{ secrets.GHCR_PASS }}
    args: "--remove-orphans --force-recreate"
    summary: true
